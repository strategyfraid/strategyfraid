<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Potato Case ‚Äì strategyfraid</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    background: radial-gradient(circle at top, #1a1a1a, #0b0b0b);
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding-top: 30px;
    margin: 0;
}

a {
    color: #3b82f6;
    text-decoration: none;
    font-weight: bold;
    display: inline-block;
    margin-bottom: 20px;
}

h1 {
    font-size: 36px;
    margin-bottom: 20px;
}

/* CASE STYLING */
.case {
    width: 600px;
    height: 140px;
    margin: 25px auto;
    border: 2px solid #444;
    background: #111;
    overflow: hidden;
    position: relative;
}

.items {
    display: flex;
    position: absolute;
    left: 0;
}

.item {
    width: 120px;
    height: 120px;
    margin: 10px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    text-align: center;
    font-size: 14px;
    box-shadow: inset 0 0 10px rgba(0,0,0,.6);
}

.common { background: linear-gradient(#777, #555); }
.rare { background: linear-gradient(#3b82f6, #1e40af); }
.epic { background: linear-gradient(#a855f7, #6b21a8); }
.legendary { background: linear-gradient(#f59e0b, #92400e); }

.marker {
    position: absolute;
    top: 0;
    left: 50%;
    width: 4px;
    height: 100%;
    background: red;
    transform: translateX(-50%);
}

button {
    padding: 12px 28px;
    font-size: 16px;
    cursor: pointer;
    background: #f59e0b;
    border: none;
    border-radius: 4px;
    font-weight: bold;
    margin-top: 20px;
}

#result {
    margin-top: 15px;
    font-size: 20px;
}

.inventory {
    margin-top: 30px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    text-align: left;
    background: #222;
    padding: 15px;
    border-radius: 8px;
}

.inventory h2 {
    margin-top: 0;
}

.inv-item {
    padding: 6px;
    border-bottom: 1px solid #333;
    font-size: 14px;
}
</style>
</head>

<body>

<a href="/">‚Üê back to strategyfraid</a>

<h1>ü•î Potato Case</h1>

<div class="case">
    <div class="marker"></div>
    <div class="items" id="items"></div>
</div>

<button onclick="roll()">OPEN CASE</button>

<div id="result"></div>

<div class="inventory">
    <h2>üì¶ Inventory</h2>
    <div id="inventory"></div>
</div>

<script>
// ===== POTATO DATA =====
const potatoes = [
    { name: "Dirt Potato", rarity: "common", chance: 55 },
    { name: "Boiled Potato", rarity: "common", chance: 25 },
    { name: "Golden Potato", rarity: "rare", chance: 12 },
    { name: "Radioactive Potato", rarity: "epic", chance: 6 },
    { name: "Cosmic Potato", rarity: "legendary", chance: 2 }
];

// ===== ELEMENTS =====
const itemsDiv = document.getElementById("items");
const resultDiv = document.getElementById("result");
const inventoryDiv = document.getElementById("inventory");

let rolling = false;

// ===== INVENTORY FUNCTIONS =====
function loadInventory() {
    const inv = JSON.parse(localStorage.getItem("potatoInventory")) || [];
    inventoryDiv.innerHTML = "";
    inv.forEach(p => {
        const d = document.createElement("div");
        d.className = "inv-item";
        d.textContent = `${p.name} (${p.rarity})`;
        inventoryDiv.appendChild(d);
    });
}

function saveToInventory(potato) {
    const inv = JSON.parse(localStorage.getItem("potatoInventory")) || [];
    inv.push(potato);
    localStorage.setItem("potatoInventory", JSON.stringify(inv));
    loadInventory();
}

// ===== RANDOM POTATO FUNCTION =====
function getRandomPotato() {
    const roll = Math.random() * 100;
    let total = 0;
    for (const p of potatoes) {
        total += p.chance;
        if (roll < total) return p;
    }
}

// ===== ROLL FUNCTION =====
function roll() {
    if (rolling) return;
    rolling = true;

    itemsDiv.innerHTML = "";
    itemsDiv.style.transition = "none";
    itemsDiv.style.left = "0px";
    resultDiv.textContent = "";

    // generate strip of potatoes
    const strip = [];
    for (let i = 0; i < 40; i++) {
        strip.push(getRandomPotato());
    }

    // pick the "winning" potato
    const winningIndex = 30;
    const winningPotato = strip[winningIndex];

    strip.forEach(p => {
        const div = document.createElement("div");
        div.className = `item ${p.rarity}`;
        div.textContent = p.name;
        itemsDiv.appendChild(div);
    });

    // calculate offset to center winning potato
    const offset = -(winningIndex * 140) + 300;

    // animate
    setTimeout(() => {
        itemsDiv.style.transition = "left 4s cubic-bezier(0.1, 0.9, 0.2, 1)";
        itemsDiv.style.left = offset + "px";
    }, 50);

    // show result
    setTimeout(() => {
        resultDiv.textContent = `üéâ You unboxed: ${winningPotato.name}!`;
        saveToInventory(winningPotato);
        rolling = false;
    }, 4200);
}

// ===== INITIAL LOAD =====
loadInventory();
</script>

</body>
</html>
